{
  "Index": <%= spec.index %>,
  "Job": "<%= name %>",
  "Zone": "<%= p("metron_agent.zone") %>",
  "Deployment": "<%= p("metron_agent.deployment") %>",

  "EtcdUrls": [<%= p("etcd.machines").map{|addr| "\"http://#{addr}:4001\""}.join(",")%>],
  "EtcdMaxConcurrentRequests": <%= p("etcd.maxconcurrentrequests") %>,

  "SharedSecret": "<%= p("loggregator_endpoint.shared_secret") %>",

  "LegacyIncomingMessagesPort": <%= p("metron_agent.incoming_port") %>,
  "DropsondeIncomingMessagesPort": <%= p("metron_agent.dropsonde_incoming_port") %>,

  "VarzUser": "<%= p("metron_agent.status.user") %>",
  "VarzPass": "<%= p("metron_agent.status.password") %>",
  "VarzPort": <%= p("metron_agent.status.port") %>,

  "NatsHosts": ["<%= p("cf.nats.host") %>"],
  "NatsPort": <%= p("cf.nats.port") %>,
  "NatsUser": "<%= p("cf.nats.username") %>",
  "NatsPass": "<%= p("cf.nats.password") %>",
  "CollectorRegistrarIntervalMilliseconds": <%= p("metron_agent.collector_registrar_interval_milliseconds") %>,

  "EtcdQueryIntervalMilliseconds": <%= p("metron_agent.etcd_query_interval_milliseconds") %>,

  "LoggregatorDropsondePort": <%= p("loggregator.dropsonde_incoming_port") %>

  <% if_p("syslog_daemon_config") do |_| %>
  , "Syslog": "vcap.metron_agent"
  <% end %>
}
